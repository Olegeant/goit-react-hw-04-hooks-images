(this["webpackJsonpgoit-react-hw-04-hooks-images"]=this["webpackJsonpgoit-react-hw-04-hooks-images"]||[]).push([[0],{10:function(e,t,r){e.exports={Notification:"Notification_Notification__2itmK",Message:"Notification_Message__3De0i",info:"Notification_info__koknh",warning:"Notification_warning__20YlR",error:"Notification_error__3nMHe"}},11:function(e,t,r){e.exports={Overlay:"Modal_Overlay__ntM-Q",Modal:"Modal_Modal__3f_ik",CloseBtn:"Modal_CloseBtn__3DTJZ"}},12:function(e,t,r){e.exports={Arrow:"ScrollArrow_Arrow__3Y82g",ArrowUp:"ScrollArrow_ArrowUp__2sP7L ScrollArrow_Arrow__3Y82g",ArrowDown:"ScrollArrow_ArrowDown__1LkSS ScrollArrow_Arrow__3Y82g"}},14:function(e,t,r){e.exports={ImageGalleryItem:"ImageGalleryItem_ImageGalleryItem__1yBlp","ImageGalleryItem-image":"ImageGalleryItem_ImageGalleryItem-image__3afTu"}},16:function(e,t,r){e.exports={ImageGallery:"ImageGallery_ImageGallery__Vbq3b"}},18:function(e,t,r){e.exports={Loader:"Loader_Loader__2shR7"}},24:function(e,t,r){},47:function(e,t,r){"use strict";r.r(t);var a=r(0),n=r.n(a),o=r(5),c=r.n(o),i=(r(23),r(24),r(15)),s=r(3),l=r(4),u=(r(25),"https://pixabay.com/api/"),m="21850804-e13ac47ee6c84255406cdac88",d={};var b={fetchImages:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=new URLSearchParams({image_type:"photo",orientation:"horizontal",q:e,page:t,per_page:12,key:m}),a=u+"?"+r;return fetch(a,d).then((function(e){return e.ok?e.json():Promise.reject(new Error("Unexpected error from server side"))}))}},h=r(6),f=r.n(h),j=r(1),g=function(e){var t=e.onSubmit,r=Object(a.useState)(""),n=Object(s.a)(r,2),o=n[0],c=n[1];return Object(j.jsx)("header",{className:f.a.Searchbar,children:Object(j.jsxs)("form",{className:f.a.SearchForm,onSubmit:function(e){e.preventDefault();var r=o.trim();r?(t(r),c("")):l.b.error("Enter search query")},children:[Object(j.jsx)("button",{type:"submit",className:f.a["SearchForm-button"],children:Object(j.jsx)("span",{className:f.a["SearchForm-button-label"],children:"Search"})}),Object(j.jsx)("input",{className:f.a["SearchForm-input"],type:"text",autoComplete:"off",autoFocus:!0,placeholder:"Search images and photos",value:o,onChange:function(e){c(e.target.value.toLowerCase())}})]})})},_=r(16),p=r.n(_),O=r(14),w=r.n(O);var y=function(e){var t=e.url,r=e.id,a=e.tags;return Object(j.jsx)("li",{className:w.a.ImageGalleryItem,children:Object(j.jsx)("img",{src:t,"data-id":r,alt:a,className:w.a["ImageGalleryItem-image"]})})};var v=function(e){var t=e.images,r=e.onImgClick;return Object(j.jsx)("ul",{className:p.a.ImageGallery,onClick:function(e){if(e.target!==e.currentTarget){var t=Number(e.target.dataset.id);r(t)}},children:t.map((function(e){return Object(j.jsx)(y,{id:e.id,url:e.webformatURL,tags:e.tags},e.id)}))})},x=r(9),S=r.n(x);function I(e){var t=e.onClick,r=e.loading,a=e.children;return Object(j.jsx)("button",{type:"button",onClick:function(){r||t()},className:r?S.a.ButtonLoading:S.a.Button,children:Object(j.jsx)("span",{className:S.a.ButtonText,children:a})})}var N=I;I.defaultProps={loading:!1};var k=r(10),C=r.n(k);function L(e){var t=e.type,r=e.children;return Object(j.jsx)("div",{className:C.a.Notification,children:Object(j.jsx)("p",{className:[C.a.Message,C.a[t]].join(" "),children:r})})}var B=L;L.defaultProps={type:"info"};var A=r(17),E=r.n(A),F=r(18),R=r.n(F);function T(e){var t=e.type,r=e.color,a=e.height,n=e.width;return Object(j.jsx)(E.a,{className:R.a.Loader,type:t,color:r,height:a,width:n})}var U=r(11),G=r.n(U),M=document.querySelector("#modal-root"),q=function(e){var t=e.image,r=t.largeImageURL,n=t.tags,c=e.onClose,i=Object(a.useCallback)((function(e){"Escape"===e.code&&c()}),[c]);Object(a.useEffect)((function(){return window.addEventListener("keydown",i),function(){window.removeEventListener("keydown",i)}}),[i]);return Object(o.createPortal)(Object(j.jsxs)("div",{className:G.a.Overlay,onClick:function(e){e.currentTarget===e.target&&c()},children:[Object(j.jsx)("div",{className:G.a.Modal,children:Object(j.jsx)("img",{src:r,alt:n})}),Object(j.jsx)("button",{type:"button",className:G.a.CloseBtn,onClick:c,children:"\u2716"})]}),M)};var D=r(12),P=r.n(D),H=function(e){var t=e.type,r=Object(a.useState)(!1),n=Object(s.a)(r,2),o=n[0],c=n[1];Object(a.useEffect)((function(){var e=function(e,t){var r,a,n=!1;return function o(){if(n)return r=arguments,void(a=this);e.apply(this,arguments),n=!0,setTimeout((function(){n=!1,r&&(o.apply(a,r),r=a=null)}),t)}}((function(){switch(t){case"up":c(window.pageYOffset>document.documentElement.clientHeight);break;case"down":c(window.pageYOffset+2*document.documentElement.clientHeight<document.body.scrollHeight)}}),500);return window.addEventListener("scroll",e),function(){window.removeEventListener("scroll",e)}}),[t]);return o?Object(j.jsx)("div",{className:function(){switch(t){case"up":return P.a.ArrowUp;case"down":return P.a.ArrowDown;default:return P.a.ArrowUp}}(),onClick:function(){switch(t){case"up":window.scrollTo({top:0,left:window.pageXOffset,behavior:"smooth"});break;case"down":window.scrollTo({top:document.body.scrollHeight,left:window.pageXOffset,behavior:"smooth"});break;default:throw new Error("Unsupported scroll-arrow type")}}}):null},J="idle",Y="pending",Q="resolved",X="rejected",z=function(){var e=Object(a.useState)(""),t=Object(s.a)(e,2),r=t[0],n=t[1],o=Object(a.useState)(1),c=Object(s.a)(o,2),u=c[0],m=c[1],d=Object(a.useState)([]),h=Object(s.a)(d,2),f=h[0],_=h[1],p=Object(a.useState)(null),O=Object(s.a)(p,2),w=O[0],y=O[1],x=Object(a.useState)(J),S=Object(s.a)(x,2),I=S[0],k=S[1],C=Object(a.useState)(!1),L=Object(s.a)(C,2),A=L[0],E=L[1],F=Object(a.useState)(null),R=Object(s.a)(F,2),U=R[0],G=R[1],M=Object(a.useState)(!1),D=Object(s.a)(M,2),P=D[0],z=D[1],K=Object(a.useState)(!1),V=Object(s.a)(K,2),Z=V[0],W=V[1];Object(a.useEffect)((function(){""!==r&&(k(Y),z(!0),b.fetchImages(r,u).then((function(e){return e.hits.map((function(e){return{id:e.id,webformatURL:e.webformatURL,largeImageURL:e.largeImageURL,tags:e.tags}}))})).then((function(e){0===e.length?(1===u?l.b.error("No images for this query. Try another search"):l.b.error("No more images on Pixabay! You may add your images!"),W(!1)):W(!0),_((function(t){return[].concat(Object(i.a)(t),Object(i.a)(e.filter((function(e){return!t.some((function(t){return t.id===e.id}))}))))})),k(Q),z(!1),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})})).catch((function(e){l.b.error(e.message),y(e),k(X),z(!1)})))}),[r,u]);var $=Object(a.useCallback)((function(){E((function(e){return!e}))}),[]),ee=function(){m((function(e){return e+1}))};return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)(g,{onSubmit:function(e){e!==r?(n(e),_([]),m(1)):ee()}}),I===J&&Object(j.jsx)(B,{type:"info",children:"No images yet. Please enter the query for search!"}),I===Q&&0===f.length&&Object(j.jsx)(B,{type:"warning",children:"No search results..."}),I===X&&0===f.length&&Object(j.jsxs)(B,{type:"error",children:["ERROR OCCURRED! ",w.message]}),Object(j.jsx)(v,{images:f,onImgClick:function(e){var t=f.find((function(t){return e===t.id}));G(t),$()}}),Z&&Object(j.jsx)(N,{onClick:ee,loading:P,children:"Load more..."}),Object(j.jsx)(l.a,{autoClose:3e3}),A&&Object(j.jsx)(q,{image:U,onClose:$}),P&&Object(j.jsx)(T,{type:"ThreeDots",color:"#3f51b5",height:180,width:180}),Object(j.jsx)(H,{type:"down"}),Object(j.jsx)(H,{type:"up"})]})};c.a.render(Object(j.jsx)(n.a.StrictMode,{children:Object(j.jsx)(z,{})}),document.getElementById("root"))},6:function(e,t,r){e.exports={Searchbar:"Searchbar_Searchbar__A3zJN",SearchForm:"Searchbar_SearchForm__1xI2c","SearchForm-button":"Searchbar_SearchForm-button__1inmr","SearchForm-button-label":"Searchbar_SearchForm-button-label__3gJm3","SearchForm-input":"Searchbar_SearchForm-input__3Xtpu"}},9:function(e,t,r){e.exports={Button:"Button_Button__1qsyI",ButtonLoading:"Button_ButtonLoading__QSJhQ Button_Button__1qsyI",ButtonText:"Button_ButtonText__qJTHk",rotate:"Button_rotate__LCq8s"}}},[[47,1,2]]]);
//# sourceMappingURL=main.8217eadc.chunk.js.map